# 公共配置文件
# @author lora
spring:
  application:
    name: bi
  # 默认 dev 环境
  profiles:
    active: dev
  # 支持 swagger3
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  # session 配置
  session:
    # todo 取消注释开启分布式 session（须先配置 Redis）
    # store-type: redis
    # 30 天过期
    timeout: 2592000
  # 数据库配置
  # todo 需替换配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/lora_bi
    username: root
    password: 153246
  # Redis 配置
  # todo 需替换配置，然后取消注释
  redis:
    database: 1
    host: localhost
    port: 6379
    timeout: 5000
#    password: 123456
  # Elasticsearch 配置
  # todo 需替换配置，然后取消注释
#  elasticsearch:
#    uris: http://localhost:9200
#    username: root
#    password: 123456
  # 文件上传
  servlet:
    multipart:
      # 大小限制
      max-file-size: 10MB
server:
  address: 0.0.0.0
  port: 8101
  servlet:
    context-path: /api
    # cookie 30 天过期
    session:
      cookie:
        max-age: 2592000
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: false
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      logic-delete-field: isDelete # 全局逻辑删除的实体字段名
      logic-delete-value: 1 # 逻辑已删除值（默认为 1）
      logic-not-delete-value: 0 # 逻辑未删除值（默认为 0）
# 微信相关
wx:
  # 微信公众平台
  # todo 需替换配置
  mp:
    token: xxx
    aesKey: xxx
    appId: xxx
    secret: xxx
    config-storage:
      http-client-type: HttpClient
      key-prefix: wx
      redis:
        host: 127.0.0.1
        port: 6379
      type: Memory
  # 微信开放平台
  # todo 需替换配置
  open:
    appId: xxx
    appSecret: xxx
# 对象存储
# todo 需替换配置
cos:
  client:
    accessKey: xxx
    secretKey: xxx
    region: xxx
    bucket: xxx
# 接口文档配置
knife4j:
  enable: true
  openapi:
    title: "接口文档"
    version: 1.0
    group:
      default:
        api-rule: package
        api-rule-resources:
          - com.lora.bi.controller

# rabbitmq starter 配置
  rabbitmq:
    host: localhost
    port: 5672
    password: guest
    username: guest


# z.ai 配置
zai:
  client:
    api-key: 4f045d60167549999025da13c71b352a.cEaLvlxkSbTIAkrS
    model: glm-4.5
    temperature: 0.3
    max-tokens: 5000
    base-url: https://api.z.ai/api/paas/v4/
    system-message: "你是一个专业的数据分析师，能够帮助用户分析图表数据"
# AI 系统提示词配置
ai:
  system:
    chart-prompt: |
      你是数据分析师。根据用户的分析目标和CSV数据， 生成ECharts配置和分析结论。                         
      
      输出格式：                                    
      <execute>                                     
      option = { /* 完整的ECharts配置 */ };         
      </execute>                                    
      <text>                                        
      简明的分析结论                                
      </text>                                       
      
      要求：                                        
      1. 不要有多余文字和解释                       
      2. 确保标签正确闭合                           
      3. 输出完立即停止 
      
      
      
      

#      你是一名资深的数据分析师和前端可视化专家。你的目标是根据用户提供的分析目标和 CSV 格式的原始数据，选择最合适的图表类型，生成可视化配置代码和详细的分析结论。
#      请严格遵守以下规则：
#      1. 你的回复必须是纯文本，**不要包含任何多余的开头、结尾、注释或解释文字**。
#      2. 你的输出必须严格包含且仅包含以下两部分内容：ECharts 配置代码和数据分析结论。
#      3. ECharts 配置代码必须是完整的 JavaScript 对象（例如，`option = {...}` 的形式），并严格包裹在 `<execute>...</execute>` 标签内。**确保标签正确闭合**。
#      4. 数据分析结论**必须简明扼要，突出核心洞察和建议**，并严格包裹在 `<text>...</text>` 标签内。**确保标签正确闭合**。
#      5. **在输出完所有内容后立即停止，不要添加任何额外的说明、解释或其他文字**。
#      输出格式示例（严格按照此格式，确保标签闭合）：
#      <execute>
#      option = {
#        title: {
#          text: '示例图表'
#        },
#        tooltip: {},
#        xAxis: {
#          type: 'category',
#          data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
#        }
#        yAxis: {
#          type: 'value'
#        },
#        series: [
#          {
#            name: '销售额',
#            data: [150, 230, 224, 218, 135, 147, 260],
#            type: 'line'
#          }
#        ]
#      };
#      </execute>
#      <text>
#      这里是简明扼要的数据分析结论，突出核心洞察和建议。请确保结论简洁明了，并严格包裹在text标签内。在输出完结论后立即停止，不要添加任何额外内容。确保标签正确闭合，不要让标签开放。
#      </text>
#      重要提醒：请确保 <execute> 和 </execute> 标签、<text> 和 </text> 标签都正确闭合。不要在输出末尾添加任何额外的文字、解释或说明。